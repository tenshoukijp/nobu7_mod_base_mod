#pragma once

#include <windows.h>

#define AhX 0x5DBA28

#define 鏊喼Ȃ 0x538EB8

#define UڕWȂ 0x539000

#define ԍȂ   0x539000

// 144oCg
#pragma pack(1)
struct NB7^ {
	char 閼[10];
	int* p喼; // ̏喼̐擪intɂ́Ȃ喼ƂȂ镐indexւ̃|C^Ă
	int* pUڕW; // ̏邪UڕWƂĂւ̃|C^BϔC̏ꍇɈӖB鏫indexւ̃|C^ĂBڕWȂꍇɂ([00 90 53 00]Ă̂ŁA͈͂ɂ邩ǂ`FbN)
	int unknown02;
	int K;
	int h;
	int hMAX;
	int K;
	int KMAX;
	int ;
	int MAX;
	int Rn;
	int RnMAX;
	int SC;
	int SCMAX;
	int C;
	int CMAX;
	int ;
	int MAX;
	int ;
	int MAX;
	int unknown03; // s
	int unknown04; // s
	int }bv̂wW; // }bv̂wW
	int }bv̂xW; // }bv̂xW
	int ďԍ; // ď鎞̏n`̔ԍ
	WORD l; // K⒆̏lB00 = lȂ@01 = 풓l@02 = Cl@03 = SbDl@04 = ŏl@05 = 폤l@06 = 폤l@07 = l@08 = il@09 = l@0A = l@0B = 䏤l@0C = sl
	WORD unknown06; // s
	BYTE lK⒆ : 4; // ̃tO͍Ă鏤lĂK⏤lł邱Ƃ悤B풓lK⒆ǂBႦΑɂ䏤l̂悤ɂƋ鏤lƂ̃tOONɂȂȂBꎞIȗKONɂȂB0 = K⒆łȂ@1 = K⒆B̍䏤lAuɑ݂鏤lv͂̃tO͖֌W(tO0)B
	BYTE ϔC : 1; // 0:ϔCȂA1:ϔC
	BYTE ϔCU : 3; // KɁuϔCԁv`FbN邱ƁBuϔCԂPvȂ炱́uϔCUv̒lӖB  0:ϋɍUA2:ɍUA4:U֎~
	BYTE unused1; // gp
	int unknown07; // s
	int* p; // ɑ镐ւ̃|C^(̔z̊Y̏̈ʒu𒼐ڎwĂ)
	int unknown08; // s
	int* pJnjbg; // ̏ɋAĂ郆jbgւ̃|C^ [00 00 00 00][E0 90 53 00]Ă΁Ãjbg͂ȂB
	int ԍ;  // ŏ̏f[^1AŌ̏f[^64Bz̏Ԃ+1̂Ȃ̂œɗpl͂ȂB
	int 鐔;    // SẴf[^ 0x40(=64)Ƃ鑍ĂB
	int* pԍ; // u喼Ɣzv̎̏ւ̃|C^ĂB̑喼Ƃ̍Ō̏ɂ́u00 90 53 00vĂBĂ̑喼ƂɂP邪Ȃꍇ́AKu00 90 53 00vĂB킴킴̏g킸Ƃp喼g悢B
};
#pragma pack()

BOOL isValidCastleID(int iCastleID);

int getCastleIDFromCastlePtr(int* iCastlePtr);

// ID炻̏̕ID擾BY҂Ȃ0xFFFF
// ۂɁuɋvƂӖłAȕɏĂvƂӖł͂ȂB
// Ⴆ΁AĴ߂ɏ̊OɃLN^[oĂ镐́AuɋȂvƌȂB
int getBushouIDFromCastleID(int iCastleID);

// w̏́uUڕWv̏ID擾BY҂Ȃ0xFFFF
int getUڕWCastleId(int iCastleID);

// w̏́uUڕWv̏IDݒ肷BY҂Ȃ0xFFFF
BOOL setUڕWCastleId(int iCastleID, int iUڕWCastleID);


// ̋A喼̑喼ID擾B喼ɋAĂȂ0xFFFF
int getDaimyoIDFromCastleID(int iCastleID);

// ̏̍(EفEV)̂ǂȂ̂擾
std::string get(int iCastleID);

// ̖Oݒ肷B
BOOL setCastleName(int iCastleID, std::string strCastleName);

// Ώۂ̏̏喼iDaimyoIDɐݒ肷B
BOOL setDaimyoIDToCastleID(int iCastleID, int iDaimyoID);

/*
00524C88  A2 82 C5 82 B7 82 A9 81 48 00 00 00 8A D9 00 00  łH.....
00524C98  8C E4 96 56 00 00 00 00                          V....
*/

/*
̂ɂĂ̓f[^͂ȂAn[hR[fBOĂ悤B
004A1C77   83FB 25          CMP EBX,25                     0x25 = 37 = R ł 524C98 = V ɂ
004A1C7A   75 24            JNZ SHORT Nobunaga.004A1CA0
004A1C7C   8D6424 00        LEA ESP,DWORD PTR SS:[ESP]
004A1C80   8A46 01          MOV AL,BYTE PTR DS:[ESI+1]
004A1C83   83C6 01          ADD ESI,1
004A1C86   84C0             TEST AL,AL
004A1C88  ^75 F6            JNZ SHORT Nobunaga.004A1C80
004A1C8A   A1 984C5200      MOV EAX,DWORD PTR DS:[524C98]
004A1C8F   8906             MOV DWORD PTR DS:[ESI],EAX
004A1C91   8A0D 9C4C5200    MOV CL,BYTE PTR DS:[524C9C]
004A1C97   5F               POP EDI
004A1C98   884E 04          MOV BYTE PTR DS:[ESI+4],CL
004A1C9B   5E               POP ESI
004A1C9C   5B               POP EBX
004A1C9D   C2 0C00          RETN 0C
004A1CA0   83FB 2B          CMP EBX,2B                      0x2B = 43 = UP ł 524C94 =  ɂ
004A1CA3   75 22            JNZ SHORT Nobunaga.004A1CC7
004A1CA5   8A46 01          MOV AL,BYTE PTR DS:[ESI+1]
004A1CA8   83C6 01          ADD ESI,1
004A1CAB   84C0             TEST AL,AL
004A1CAD  ^75 F6            JNZ SHORT Nobunaga.004A1CA5
004A1CAF   66:8B15 944C5200 MOV DX,WORD PTR DS:[524C94]
004A1CB6   66:8916          MOV WORD PTR DS:[ESI],DX
004A1CB9   A0 964C5200      MOV AL,BYTE PTR DS:[524C96]
004A1CBE   5F               POP EDI
004A1CBF   8846 02          MOV BYTE PTR DS:[ESI+2],AL
004A1CC2   5E               POP ESI
004A1CC3   5B               POP EBX
004A1CC4   C2 0C00          RETN 0C
004A1CC7   8A46 01          MOV AL,BYTE PTR DS:[ESI+1]
004A1CCA   83C6 01          ADD ESI,1
004A1CCD   84C0             TEST AL,AL
004A1CCF  ^75 F6            JNZ SHORT Nobunaga.004A1CC7
004A1CD1   66:8B0D 782B5200 MOV CX,WORD PTR DS:[522B78]
004A1CD8   66:890E          MOV WORD PTR DS:[ESI],CX
004A1CDB   8A15 7A2B5200    MOV DL,BYTE PTR DS:[522B7A]
004A1CE1   5F               POP EDI
004A1CE2   8856 02          MOV BYTE PTR DS:[ESI+2],DL
004A1CE5   5E               POP ESI
004A1CE6   5B               POP EBX
004A1CE7   C2 0C00          RETN 0C
004A1CEA   8B4424 08        MOV EAX,DWORD PTR SS:[ESP+8]
004A1CEE   C600 00          MOV BYTE PTR DS:[EAX],0
004A1CF1   5B               POP EBX
004A1CF2   C2 0C00          RETN 0C
*/

/*
	
	̕t
	E
	E
	E
	
	O

005DBA28  93 E0 00 00 00 00 00 00 00 00 A8 D4 56 00 00 90  ........V..E
005DBA38  53 00 00 00 00 00 08 00 00 00 EF 00 00 00 20 03  S........E.. 
005DBA48  00 00 90 1B 00 00 50 C3 00 00 90 28 00 00 50 C3  ..E..P..E..P
005DBA58  00 00 E5 02 00 00 50 C3 00 00 C6 01 00 00 50 C3  ..E..P....P
005DBA68  00 00 00 00 00 00 1F 00 00 00 B9 1A 00 00 50 C3  ...........P   [B9 1A] ͕B[50 C3]MAX(50000)
005DBA78  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DBA88  00 00 05 00 00 00 2F 00 00 00 00 00 00 00 00 00  ...../.........W
005DBA98  00 00 00 00 00 00 00 00 48 21 56 00 00 00 00 00  ........H!V.....
005DBAA8  E0 90 53 00 01 00 00 00 40 00 00 00 00 90 53 00  S....@....S.

005DBAB8  8A CC 95 74 00 00 00 00 00 00 66 D3 56 00 00 90  ̕t......fV..E
005DBAC8  53 00 00 00 00 00 07 00 00 00 29 01 00 00 BC 02  S........)..
005DBAD8  00 00 82 11 00 00 50 C3 00 00 42 1E 00 00 50 C3  ..E..P..B..P
005DBAE8  00 00 3C 02 00 00 50 C3 00 00 27 00 00 00 50 C3  ..<..P..'...P
005DBAF8  00 00 00 00 00 00 1F 00 00 00 28 15 00 00 50 C3  .........(..P
005DBB08  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DBB18  00 00 06 00 00 00 3B 00 00 00 08 00 00 00 00 00  .....;........
005DBB28  00 00 00 00 00 00 00 00 88 1D 56 00 00 00 00 00  ........EV.....
005DBB38  E0 90 53 00 02 00 00 00 40 00 00 00 00 90 53 00  S....@....S.

005DBB48  94 AA 91 E3 00 00 00 00 00 00 E2 D0 56 00 00 90  ......V..E
005DBB58  53 00 00 00 00 00 08 00 00 00 23 01 00 00 20 03  S........#.. 
005DBB68  00 00 84 15 00 00 50 C3 00 00 5D 2C 00 00 50 C3  ..E..P..],..P
005DBB78  00 00 F2 02 00 00 50 C3 00 00 34 00 00 00 50 C3  ..E..P..4...P
005DBB88  00 00 00 00 00 00 1F 00 00 00 F4 1A 00 00 50 C3  .........E..P
005DBB98  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DBBA8  00 00 0D 00 00 00 1F 00 00 00 08 00 00 00 06 00  .............
005DBBB8  00 00 01 00 00 00 00 00 08 13 56 00 00 00 00 00  .......V.....
005DBBC8  E0 90 53 00 03 00 00 00 40 00 00 00 00 90 53 00  S....@....S.

005DBBD8  93 73 89 97 8C 53 00 00 00 00 24 D2 56 00 00 90  sS....$V..E
005DBBE8  53 00 00 00 00 00 08 00 00 00 15 01 00 00 20 03  S.......... 
005DBBF8  00 00 94 11 00 00 50 C3 00 00 7F 1C 00 00 50 C3  ..E..P....P
005DBC08  00 00 0F 02 00 00 50 C3 00 00 24 00 00 00 50 C3  ....P..$...P
005DBC18  00 00 00 00 00 00 1F 00 00 00 F5 13 00 00 50 C3  .........E..P
005DBC28  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DBC38  00 00 0E 00 00 00 34 00 00 00 02 00 00 00 00 00  .....4........
005DBC48  00 00 00 00 00 00 00 00 C8 19 56 00 00 00 00 00  ........V.....
005DBC58  E0 90 53 00 04 00 00 00 40 00 00 00 00 90 53 00  S....@....S.

005DBC68  8D B2 89 EA 00 00 00 00 00 00 A0 CF 56 00 00 90  ......V..E
005DBC78  53 00 00 00 00 00 08 00 00 00 05 01 00 00 20 03  S.......... 

@@@E
@@@E
@@@E

005DDCF8  E0 90 53 00 3E 00 00 00 40 00 00 00 08 DD 5D 00  S.>...@...].
005DDD08  8E 4F 8C CB 00 00 00 00 00 00 8A 99 56 00 00 90  O......V..E
005DDD18  53 00 00 00 00 00 08 00 00 00 35 01 00 00 20 03  S........5.. 
005DDD28  00 00 FB 0E 00 00 50 C3 00 00 04 26 00 00 50 C3  ..E..P..&..P
005DDD38  00 00 B2 0D 00 00 50 C3 00 00 00 00 00 00 50 C3  .....P......P
005DDD48  00 00 00 00 00 00 1F 00 00 00 89 1A 00 00 50 C3  .........E..P
005DDD58  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DDD68  00 00 A5 00 00 00 3E 00 00 00 08 00 00 00 00 00  .....>........
005DDD78  00 00 00 00 00 00 00 00 88 25 54 00 00 00 00 00  ........ET.....
005DDD88  E0 90 53 00 3F 00 00 00 40 00 00 00 00 90 53 00  S.?...@....S.
005DDD98  8F BC 91 4F 00 00 00 00 00 00 48 98 56 00 00 90  O......HV..E
005DDDA8  53 00 00 00 00 00 07 00 00 00 04 01 00 00 BC 02  S..........
005DDDB8  00 00 BF 0E 00 00 50 C3 00 00 AA 13 00 00 50 C3  ....P....P
005DDDC8  00 00 5F 01 00 00 50 C3 00 00 00 00 00 00 50 C3  .._..P......P
005DDDD8  00 00 00 00 00 00 1F 00 00 00 EF 0D 00 00 50 C3  .........E..P
005DDDE8  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DDDF8  00 00 A8 00 00 00 1A 00 00 00 01 00 00 00 00 00  .............
005DDE08  00 00 00 00 00 00 00 00 48 23 54 00 00 00 00 00  ........H#T.....
005DDE18  E0 90 53 00 40 00 00 00 40 00 00 00 00 90 53 00  S.@...@....S.
*/


/*
̃`FbN
005DCE68  8C E4 8E 52 00 00 00 00 00 00 70 B1 56 00 00 90  R......pV..E
005DCE78  53 00 00 00 00 00 07 00 00 00 CF 01 00 00 BC 02  S..........
005DCE88  00 00 53 0C 00 00 50 C3 00 00 C7 3C 00 00 50 C3  ..S...P..<..P
005DCE98  00 00 7D 04 00 00 50 C3 00 00 CC 02 00 00 50 C3  ..}..P....P
005DCEA8  00 00 00 00 00 00 1F 00 00 00 24 2A 00 00 50 C3  .........$*..P
005DCEB8  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DCEC8  00 00 5C 00 00 00 3B 00 00 00 0A 00 00 00 00 00  ..\...;.........
005DCED8  00 00 00 00 00 00 00 00 48 3D 55 00 00 00 00 00  ........H=U.....
005DCEE8  E0 90 53 00 25 00 00 00 40 00 00 00 00 90 53 00  S.%...@....S.

005DCEF8  8F BC 91 71 00 00 00 00 00 00 68 AC 56 00 00 90  q......hV..E
005DCF08  53 00 00 00 00 00 05 00 00 00 58 01 00 00 F4 01  S........X..E
005DCF18  00 00 4D 0E 00 00 50 C3 00 00 E4 16 00 00 50 C3  ..M..P..E..P
005DCF28  00 00 99 01 00 00 50 C3 00 00 1B 00 00 00 50 C3  ..E..P.....P
005DCF38  00 00 00 00 00 00 1F 00 00 00 39 10 00 00 50 C3  .........9..P
005DCF48  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DCF58  00 00 5D 00 00 00 4D 00 00 00 08 00 00 00 06 00  ..]...M.......
005DCF68  00 00 01 00 00 00 00 00 48 22 55 00 00 00 00 00  .......H"U.....
005DCF78  E0 90 53 00 26 00 00 00 40 00 00 00 00 90 53 00  S.&...@....S.

005DCF88  8F 78 95 7B 00 00 00 00 00 00 26 AB 56 00 00 90  x{......&V..E
005DCF98  53 00 00 00 00 00 07 00 00 00 C3 01 00 00 BC 02  S..........
005DCFA8  00 00 78 24 00 00 50 C3 00 00 08 2E 00 00 50 C3  ..x$..P.....P
005DCFB8  00 00 49 03 00 00 50 C3 00 00 39 00 00 00 50 C3  ..I..P..9...P
005DCFC8  00 00 00 00 00 00 1F 00 00 00 16 20 00 00 50 C3  ......... ..P
005DCFD8  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DCFE8  00 00 5D 00 00 00 76 00 00 00 00 00 00 00 00 00  ..]...v.........
005DCFF8  00 00 00 00 00 00 00 00 08 99 54 00 00 00 00 00  ........T.....
005DD008  E0 90 53 00 27 00 00 00 40 00 00 00 E8 D2 5D 00  S.'...@...].

005DD1C8  E7 55 E7 50 83 96 8D E8 00 00 26 AB 56 00 00 90  UP..&V..E
005DD1D8  53 00 00 00 00 00 07 00 00 00 A7 01 00 00 BC 02  S..........
005DD1E8  00 00 BC 15 00 00 50 C3 00 00 62 33 00 00 50 C3  ....P..b3..P
005DD1F8  00 00 BE 11 00 00 50 C3 00 00 41 00 00 00 50 C3  ....P..A...P
005DD208  00 00 00 00 00 00 1F 00 00 00 BC 23 00 00 50 C3  .........#..P
005DD218  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DD228  00 00 63 00 00 00 6B 00 00 00 00 00 00 00 00 00  ..c...k.........
005DD238  00 00 00 00 00 00 00 00 88 FD 54 00 00 00 00 00  ........ET.....
005DD248  E0 90 53 00 2B 00 00 00 40 00 00 00 38 D1 5D 00  S.+...@...8].
*/

/*
005DC7A8  91 E5 8D E2 00 00 00 00 00 00 04 BE 56 00 00 90  ......V..E
005DC7B8  53 00 00 00 00 00 07 00 00 00 4A 01 00 00 BC 02  S........J..
005DC7C8  00 00 F7 15 00 00 50 C3 00 00 1C 33 00 00 50 C3  ..E..P..3..P
005DC7D8  00 00 68 03 00 00 50 C3 00 00 13 02 00 00 50 C3  ..h..P....P
005DC7E8  00 00 00 00 00 00 1F 00 00 00 39 1F 00 00 50 C3  .........9..P
005DC7F8  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DC808  00 00 43 00 00 00 4B 00 00 00 04 00 00 00 01 00  ..C...K.......
005DC818  00 00 00 00 00 00 00 00 C8 6E 55 00 00 00 00 00  ........nU.....
005DC828  E0 90 53 00 19 00 00 00 40 00 00 00 00 90 53 00  S....@....S.

*/

/*
ϔCȂ U֎~ ڕWȂ(01=ϔCƂȂ)

005DCDD8  95 6C 8F BC 00 00 00 00 00 00 A2 A8 56 00 00 90  l......V..E
005DCDE8  53 00 00 00 00 00 06 00 00 00 4E 01 00 00 58 02  S........N..X
005DCDF8  00 00 F2 0D 00 00 50 C3 00 00 04 2A 00 00 50 C3  ..E..P..*..P
005DCE08  00 00 1D 03 00 00 50 C3 00 00 37 00 00 00 50 C3  ....P..7...P
005DCE18  00 00 00 00 00 00 1F 00 00 00 43 1D 00 00 50 C3  .........C..P
005DCE28  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DCE38  00 00 55 00 00 00 70 00 00 00 03 00 00 00 06 00  ..U...p.......
005DCE48  00 00 [01] 00 00 00 00 00 C8 99 54 00 00 00 00 00  .......șT.....
005DCE58  E0 90 53 00 24 00 00 00 40 00 00 00 88 CF 5D 00  S.$...@...].

ϔC
U֎~
ڕW
91
005DCDD8  95 6C 8F BC 00 00 00 00 00 00 A2 A8 56 00 00 90  l......V..E
005DCDE8  53 00 00 00 00 00 06 00 00 00 4E 01 00 00 58 02  S........N..X
005DCDF8  00 00 F2 0D 00 00 50 C3 00 00 04 2A 00 00 50 C3  ..E..P..*..P
005DCE08  00 00 1D 03 00 00 50 C3 00 00 37 00 00 00 50 C3  ....P..7...P
005DCE18  00 00 00 00 00 00 1F 00 00 00 43 1D 00 00 50 C3  .........C..P
005DCE28  00 00 00 00 00 00 50 C3 00 00 00 00 00 00 08 00  ......P.......
005DCE38  00 00 55 00 00 00 70 00 00 00 03 00 00 00 06 00  ..U...p.......
005DCE48  00 00 [91] 00 00 00 00 00 C8 99 54 00 00 00 00 00  ..E....șT.....
005DCE58  E0 90 53 00 24 00 00 00 40 00 00 00 88 CF 5D 00  S.$...@...].

ϔCȂ U֎~ ڕWȂ
81

ϔC ϋɍU
11

ϔC ɍU
51*/